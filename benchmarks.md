# Non-Scientific Benchmark

## How Was Benchmark Done?
1. Use data set from https://huggingface.co/datasets/hangxie/parquet-tools/tree/main
   * All parquet files have the same schema with testdata/all-types.parquet but with more rows.
   * 10K rows data set was used for all versions.
2. Run on a 2024 Apple Air with M3/24GB (memory does not matter too much).
3. Run `make benchmark` 3 times, then pick the fastest number and post here after convert ns/op to ms/op.
4. Benchmark was added in v1.30.0, old versions need to tweak go benchmarking code to make things work.

## Benchmark Comparisons Between Versions

|          |     cat |     meta |     row-count |     schema |     size |     version | Note                                                |
| -------: | ------: | -------: | ------------: | ---------: | -------: | ----------: | --------------------------------------------------- |
|  v1.31.0 |     372 |    0.780 |         0.630 |      0.715 |    0.626 |       0.003 |                                                     |
|  v1.30.0 |     378 |    0.612 |         0.570 |      0.661 |    0.538 |       0.006 | https://github.com/hangxie/parquet-tools/issues/612 |
|  v1.29.4 |     678 |    0.616 |         0.559 |      0.628 |    0.552 |       0.006 |                                                     |
|  v1.29.3 |     670 |    0.637 |         0.560 |      0.617 |    0.524 |       0.006 |                                                     |
|  v1.29.2 |     665 |    0.650 |         0.524 |      0.641 |    0.524 |       0.006 |                                                     |
|  v1.29.1 |     667 |    0.613 |         0.556 |      0.631 |    0.529 |       0.006 |                                                     |
|  v1.29.0 |     665 |    0.614 |         0.568 |      0.642 |    0.555 |       0.006 |                                                     |
|  v1.28.3 |     741 |    0.623 |         0.538 |      0.608 |    0.532 |       0.006 |                                                     |
|  v1.28.2 |     753 |    0.606 |         0.564 |      0.606 |    0.525 |       0.006 |                                                     |
|  v1.28.1 |     748 |    0.612 |         0.591 |      0.632 |    0.528 |       0.006 |                                                     |
|  v1.28.0 |     746 |    0.636 |         0.563 |      0.577 |    0.530 |       0.006 |                                                     |
|  v1.27.1 |     805 |    0.699 |         0.561 |      0.638 |    0.570 |       0.009 |                                                     |
|  v1.27.0 |     807 |    0.646 |         0.569 |      0.668 |    0.554 |       0.005 |                                                     |
|  v1.26.1 |     804 |    0.641 |         0.559 |      0.634 |    0.572 |       0.005 |                                                     |
|  v1.26.0 |     803 |    0.637 |         0.601 |      0.632 |    0.567 |       0.006 |                                                     |
| v1.25.14 |     803 |    0.644 |         0.559 |      0.646 |    0.554 |       0.005 |                                                     |
| v1.25.13 |     787 |    0.652 |         0.571 |      0.626 |    0.579 |       0.005 |                                                     |
| v1.25.12 |     785 |    0.602 |         0.556 |      0.649 |    0.554 |       0.005 |                                                     |
| v1.25.11 |     793 |    0.649 |         0.575 |      0.636 |    0.544 |       0.005 |                                                     |
|          | **cat** | **meta** | **row-count** | **schema** | **size** | **version** | **Note**                                            |
| v1.25.10 |     794 |    0.644 |         0.565 |      0.618 |    0.594 |       0.005 |                                                     |
|  v1.25.9 |     787 |    0.658 |         0.570 |      0.651 |    0.550 |       0.006 |                                                     |
|  v1.25.8 |     752 |    0.673 |         0.585 |      0.677 |    0.568 |       0.005 |                                                     |
|  v1.25.7 |    5453 |    0.651 |         0.579 |      0.620 |    0.554 |       0.005 | https://github.com/hangxie/parquet-tools/issues/474 |
|  v1.25.6 |     711 |    0.651 |         0.563 |      0.622 |    0.557 |       0.004 |                                                     |
|  v1.25.5 |     713 |    0.619 |         0.555 |      0.657 |    0.584 |       0.005 |                                                     |
|  v1.25.4 |     716 |    0.653 |         0.593 |      0.640 |    0.574 |       0.005 |                                                     |
|  v1.25.3 |     715 |    0.648 |         0.583 |      0.631 |    0.559 |       0.005 |                                                     |
|  v1.25.2 |     713 |    0.652 |         0.572 |      0.617 |    0.593 |       0.006 |                                                     |
|  v1.25.1 |     712 |    0.629 |         0.553 |      0.648 |    0.570 |       0.006 |                                                     |
|  v1.25.0 |     715 |    0.644 |         0.589 |      0.664 |    0.565 |       0.005 |                                                     |
|  v1.24.1 |     724 |    0.655 |         0.561 |      0.641 |    0.545 |       0.004 |                                                     |
|  v1.24.0 |     719 |    0.644 |         0.569 |      0.608 |    0.547 |       0.005 |                                                     |
|  v1.23.2 |     719 |    0.645 |         0.585 |      0.675 |    0.561 |       0.005 |                                                     |
|  v1.23.1 |     726 |    0.613 |         0.554 |      0.635 |    0.643 |       0.005 |                                                     |
|  v1.23.0 |     721 |    0.656 |         0.567 |      0.613 |    0.567 |       0.005 |                                                     |
|  v1.22.4 |     711 |    0.654 |         0.565 |      0.650 |    0.565 |       0.004 |                                                     |
|  v1.22.3 |     758 |    0.655 |         0.580 |      0.622 |    0.550 |       0.005 |                                                     |
|  v1.22.2 |     715 |    0.639 |         0.565 |      0.652 |    0.568 |       0.005 |                                                     |
|  v1.22.1 |     717 |    0.667 |         0.597 |      0.636 |    0.572 |       0.005 |                                                     |
|          | **cat** | **meta** | **row-count** | **schema** | **size** | **version** | **Note**                                            |
|  v1.22.0 |     739 |    0.627 |         0.576 |      0.629 |    0.556 |       0.005 |                                                     |
|  v1.21.1 |     766 |    0.690 |         0.570 |      0.746 |    0.630 |       0.005 |                                                     |
|  v1.21.0 |     730 |    0.655 |         0.611 |      0.615 |    0.551 |       0.005 |                                                     |
|  v1.20.7 |     723 |    0.635 |         0.602 |      0.677 |    0.566 |       0.005 |                                                     |
|  v1.20.6 |     757 |    0.703 |         0.623 |      0.653 |    0.587 |       0.006 |                                                     |
|  v1.20.5 |     718 |    0.654 |         0.577 |      0.655 |    0.583 |       0.006 |                                                     |
|  v1.20.4 |     720 |    0.668 |         0.597 |      0.639 |    0.582 |       0.005 |                                                     |
|  v1.20.3 |     718 |    0.653 |         0.598 |      0.612 |    0.563 |       0.005 |                                                     |
|  v1.20.2 |     720 |    0.641 |         0.566 |      0.623 |    0.565 |       0.005 |                                                     |
|  v1.20.1 |     761 |    0.670 |         0.581 |      0.670 |    0.558 |       0.005 |                                                     |
|  v1.20.0 |     775 |    0.649 |         0.587 |      0.638 |    0.568 |       0.006 |                                                     |
|  v1.19.5 |     746 |    0.649 |         0.555 |      0.602 |    0.574 |       0.006 |                                                     |
|  v1.19.4 |     725 |    0.633 |         0.564 |      0.653 |    0.569 |       0.005 |                                                     |
|  v1.19.3 |     722 |    0.652 |         0.584 |      0.602 |    0.555 |       0.005 |                                                     |
|  v1.19.2 |     722 |    0.637 |         0.569 |      0.634 |    0.573 |       0.005 |                                                     |
|  v1.19.1 |     723 |    0.636 |         0.589 |      0.628 |    0.557 |       0.005 |                                                     |
|  v1.19.0 |     724 |    0.633 |         0.590 |      0.621 |    0.559 |       0.005 |                                                     |
|  v1.18.1 |     728 |    0.645 |         0.567 |      0.611 |    0.584 |       0.005 |                                                     |
|  v1.18.0 |     722 |    0.683 |         0.562 |      0.637 |    0.552 |       0.005 |                                                     |
|  v1.17.1 |     727 |    0.636 |         0.568 |      0.661 |    0.552 |       0.005 |                                                     |
|          | **cat** | **meta** | **row-count** | **schema** | **size** | **version** | **Note**                                            |
|  v1.17.0 |     724 |    0.586 |         0.540 |      0.590 |    0.527 |       0.005 |                                                     |
|  v1.16.0 |     729 |    0.664 |         0.588 |      0.651 |    0.560 |       0.005 |                                                     |
|  v1.15.3 |     730 |    0.629 |         0.606 |      0.634 |    0.569 |       0.005 |                                                     |
|  v1.15.2 |     729 |    0.640 |         0.581 |      0.661 |    0.565 |       0.005 |                                                     |
|  v1.15.1 |     727 |    0.633 |         0.584 |      0.641 |    0.566 |       0.005 |                                                     |
|  v1.15.0 |     726 |    0.655 |         0.573 |      0.612 |    0.551 |       0.005 |                                                     |
|  v1.14.2 |     725 |    0.627 |         0.553 |      0.625 |    0.557 |       0.005 |                                                     |
|  v1.14.1 |     726 |    0.634 |         0.590 |      0.646 |    0.571 |       0.005 |                                                     |
|  v1.14.0 |     729 |    0.601 |         0.587 |      0.619 |    0.564 |       0.006 |                                                     |
|  v1.13.9 |     733 |    0.642 |         0.589 |      0.625 |    0.578 |       0.005 |                                                     |
|  v1.13.8 |     739 |    0.640 |         0.573 |      0.662 |    0.547 |       0.005 |                                                     |
|  v1.13.7 |     732 |    0.645 |         0.589 |      0.580 |    0.552 |       0.004 |                                                     |
|  v1.13.6 |     737 |    0.662 |         0.557 |      0.578 |    0.592 |       0.005 |                                                     |
|  v1.13.5 |     737 |    0.606 |         0.587 |      0.586 |    0.561 |       0.004 |                                                     |
|  v1.13.4 |     774 |    0.666 |         0.577 |      0.635 |    0.588 |       0.005 |                                                     |
|  v1.13.3 |     705 |    0.902 |         0.810 |      0.816 |    0.810 |       0.005 |                                                     |
|  v1.13.2 |     707 |    0.862 |         0.798 |      0.826 |    0.808 |       0.005 |                                                     |
|  v1.13.1 |     706 |    0.932 |         0.815 |      0.805 |    0.798 |       0.004 |                                                     |
|  v1.13.0 |     712 |    1.034 |         0.866 |      0.926 |    0.862 |       0.006 |                                                     |
|  v1.12.2 |     709 |    1.065 |         0.839 |      1.081 |    0.844 |       0.005 |                                                     |
|          | **cat** | **meta** | **row-count** | **schema** | **size** | **version** | **Note**                                            |
|  v1.12.1 |     710 |    1.222 |         0.855 |      0.978 |    0.836 |       0.006 |                                                     |
|  v1.12.0 |     706 |    1.113 |         0.869 |      0.978 |    0.840 |       0.005 |                                                     |
|  v1.11.7 |     706 |    1.013 |         0.899 |      0.891 |    0.862 |       0.005 |                                                     |
|  v1.11.6 |     709 |    0.962 |         0.846 |      0.938 |    0.858 |       0.006 |                                                     |
|  v1.11.5 |     506 |    1.020 |         0.888 |      0.956 |    0.846 |       0.005 |                                                     |
|  v1.11.4 |     494 |    1.030 |         0.870 |      0.981 |    0.814 |       0.006 |                                                     |
|  v1.11.3 |     454 |    0.936 |         0.840 |      1.038 |    0.869 |       0.005 |                                                     |
|  v1.11.2 |     490 |    0.988 |         0.951 |      0.995 |    0.939 |       0.005 |                                                     |
|  v1.11.1 |     490 |    0.941 |         0.858 |      1.036 |    0.842 |       0.005 |                                                     |
|  v1.11.0 |     536 |    0.884 |         0.836 |      0.882 |    0.853 |       0.006 |                                                     |
|  v1.10.5 |     634 |    0.979 |         0.839 |      0.942 |    0.866 |       0.005 |                                                     |
|  v1.10.4 |     N/A |    2.018 |         1.435 |      1.480 |    1.245 |       0.006 | https://github.com/hangxie/parquet-tools/issues/108 |
|  v1.10.3 |     446 |    0.918 |         0.872 |      0.974 |    0.850 |       0.005 |                                                     |
|  v1.10.2 |     264 |    1.043 |         0.867 |      1.037 |    0.897 |       0.005 |                                                     |
|  v1.10.1 |     291 |    0.959 |         0.939 |      0.956 |    0.919 |       0.005 |                                                     |
|  v1.10.0 |     280 |    1.117 |         2.933 |      1.126 |    1.033 |       0.005 |                                                     |
|   v1.9.0 |     286 |    0.919 |         0.858 |      0.998 |    0.852 |       0.005 |                                                     |
|   v1.8.4 |     287 |    1.481 |         1.843 |      3.217 |    0.977 |       0.005 |                                                     |
|   v1.8.3 |     266 |    0.984 |         0.838 |      0.878 |    0.893 |       0.005 |                                                     |
|   v1.8.2 |     282 |    0.931 |         0.839 |      0.963 |    0.928 |       0.005 |                                                     |
|          | **cat** | **meta** | **row-count** | **schema** | **size** | **version** | **Note**                                            |
|   v1.8.1 |     287 |    0.931 |         0.807 |      0.934 |    0.866 |       0.006 |                                                     |
|   v1.8.0 |     309 |    1.602 |         3.557 |      2.861 |    0.914 |       0.004 |                                                     |
|   v1.7.2 |     268 |    0.907 |         0.988 |      1.004 |    0.887 |       0.005 |                                                     |
|   v1.7.1 |     303 |    0.930 |         0.985 |      0.919 |    1.642 |       0.007 |                                                     |
|   v1.7.0 |     390 |    1.059 |         0.923 |      0.931 |    0.903 |       0.006 |                                                     |
|   v1.6.0 |     367 |    0.952 |         0.967 |      1.025 |    0.898 |       0.004 |                                                     |
|   v1.5.1 |     313 |    0.888 |         0.963 |      1.012 |    0.860 |       0.005 |                                                     |
|   v1.5.0 |     310 |    0.993 |         0.864 |      0.899 |    0.826 |       0.004 |                                                     |
|   v1.4.3 |     313 |    0.918 |         0.872 |      1.049 |    0.881 |       0.005 |                                                     |
|   v1.4.2 |     313 |    0.976 |         0.854 |      0.962 |    0.813 |       0.005 |                                                     |
|   v1.4.1 |     428 |    0.914 |         0.889 |      0.904 |    0.802 |       0.005 |                                                     |
|   v1.4.0 |     423 |    1.121 |         0.909 |      1.132 |    0.850 |       0.006 |                                                     |
|   v1.3.0 |     349 |    1.028 |         0.887 |      0.907 |    0.899 |       0.006 |                                                     |
|   v1.2.1 |     309 |    0.920 |         0.842 |      0.877 |    0.794 |       0.005 |                                                     |
|   v1.2.0 |     309 |    0.904 |         0.796 |      0.852 |    0.833 |       0.005 |                                                     |
|   v1.1.0 |     316 |    0.864 |         0.834 |      0.904 |    0.841 |       0.005 |                                                     |
|   v1.0.3 |     314 |    0.932 |         0.814 |      0.873 |    0.875 |       0.004 |                                                     |
|   v1.0.2 |     312 |    0.867 |         0.851 |      0.828 |    0.790 |       0.005 |                                                     |
|   v1.0.1 |     313 |    0.857 |         0.821 |      0.859 |    0.817 |       0.005 |                                                     |
|   v1.0.0 |     321 |    1.028 |         1.123 |      1.158 |    0.836 |       0.006 |                                                     |
|          | **cat** | **meta** | **row-count** | **schema** | **size** | **version** | **Note**                                            |
